import n from"node:path";import{fileURLToPath as l}from"node:url";import{app as r,BrowserWindow as i,session as p,ipcMain as c}from"electron";var d=n.dirname(l(import.meta.url));console.log("Preload path:",n.join(d,"../electron/preload.cjs"));function f(){let t=new i({width:1e3,height:600,icon:n.join(d,"../assets/icon.png"),webPreferences:{preload:n.join(d,"preload.cjs"),sandbox:!1,webSecurity:!1}});c.on("electron-download",(a,o)=>{let e=i.getFocusedWindow();e&&e.webContents.downloadURL(o)}),t.loadFile(n.join(d,"../renderer/dist/index.html")),p.defaultSession.on("will-download",(a,o,e)=>{o.setSaveDialogOptions({title:"Save PDF",defaultPath:"ER - Coupons.pdf",filters:[{name:"PDF File",extensions:["pdf"]}]}),o.on("updated",()=>{e.send("download-started","ER - Coupons.pdf")}),o.once("done",(w,s)=>{s==="completed"?e.send("download-complete","ER - Coupons.pdf"):e.send("download-failed","ER - Coupons.pdf")})})}r.whenReady().then(f);
