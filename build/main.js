import o from"node:path";import{fileURLToPath as s}from"node:url";import{app as l,BrowserWindow as r,session as p,ipcMain as f}from"electron";var d=o.dirname(s(import.meta.url));console.log("Preload path:",o.join(d,"../electron/preload.cjs"));function c(){let n=new r({width:1e3,height:600,show:!1,icon:o.join(d,"../assets/icon.ico"),autoHideMenuBar:!0,webPreferences:{preload:o.join(d,"preload.cjs"),sandbox:!1,webSecurity:!1}});n.maximize(),n.show(),n.loadFile(o.join(d,"../renderer/dist/index.html")),f.on("electron-download",(i,e)=>{n.webContents.downloadURL(e)}),p.defaultSession.on("will-download",(i,e,a)=>{e.setSaveDialogOptions({title:"Save PDF",defaultPath:"EF - Coupons.pdf",filters:[{name:"PDF File",extensions:["pdf"]}]}),e.on("updated",()=>{a.send("download-started","EF - Coupons.pdf")}),e.once("done",(w,t)=>{t==="completed"?a.send("download-complete","EF - Coupons.pdf"):a.send("download-failed","EF - Coupons.pdf")})})}l.whenReady().then(c);
